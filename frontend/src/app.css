/* app.css */
@import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');

/* CSS Variables - Color Scheme and Design Tokens */
:root {
  --primary: #124e66; --secondary: #212a31; --accent: #748d92;
  --bg: #ebeeea; --bg-dark: #d3d9d4; --text: #212a31; --text-light: #6a8389;
  --white: #ffffff; --positive: #2e7d32; --negative: #c62828;
  --positive-bg: #e8f5e9; --negative-bg: #ffebee;
  --shadow: 0 2px 8px rgba(0,0,0,0.08); --shadow-md: 0 5px 15px rgba(0,0,0,0.1);
  --radius: 10px; --transition: 0.3s ease;
}

/* Base Styles */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { 
  font-family: 'Heebo', sans-serif; background: linear-gradient(120deg, var(--bg-dark), var(--bg));
  min-height: 100vh; direction: rtl; color: var(--text); line-height: 1.6;
}

/* Layout Components */
.app-container { max-width: 1200px; margin: 0 auto; padding: 20px; }

.app-header {
  text-align: center; margin-bottom: 30px; padding: 32px 20px;
  background: linear-gradient(135deg, var(--secondary), #2e3944); color: var(--white);
  border-radius: var(--radius); box-shadow: var(--shadow-md); position: relative;
}
.app-header::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--primary), var(--accent)); }
.app-header h1 { font-size: 2.2rem; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }

/* Controls Section */
.controls-section {
  display: flex; flex-direction: column; align-items: center; margin-bottom: 30px; padding: 25px 20px;
  background: linear-gradient(to bottom, var(--accent), #6a8389); border-radius: var(--radius); box-shadow: var(--shadow);
}

.recording-controls { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; width: 100%; }

/* Buttons - Unified Styling */
.start-button, .stop-button, .debug-btn, .modal-btn, .question-action-btn {
  padding: 14px 28px; border: none; border-radius: 24px; cursor: pointer; font-weight: 600;
  transition: all var(--transition); box-shadow: var(--shadow); position: relative; overflow: hidden;
}

.start-button { background: var(--primary); color: var(--white); min-width: 180px; }
.start-button:hover { background: #0d3e53; transform: translateY(-3px); }

.stop-button { background: var(--secondary); color: var(--white); min-width: 180px; }
.stop-button:hover { background: #1a212b; transform: translateY(-3px); }

.start-button:disabled, .stop-button:disabled { background: var(--accent); cursor: not-allowed; opacity: 0.7; transform: none; }

/* Question Section */
.question-section {
  width: 100%; margin: 0 auto 25px; background: var(--white); border-radius: var(--radius); 
  box-shadow: var(--shadow); overflow: hidden; transition: all var(--transition);
}

.suggested-question { padding: 20px; }
.suggested-question h3 { margin-bottom: 15px; font-size: 16px; font-weight: 600; color: var(--text); }

.question-box {
  font-size: 18px; padding: 20px; margin-bottom: 20px; background: var(--bg); 
  border-right: 4px solid var(--primary); border-radius: 6px; font-weight: 500; 
  box-shadow: var(--shadow); position: relative; transition: all var(--transition);
}
.question-box:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
.question-box::before, .question-box::after { 
  font-family: Georgia, serif; position: absolute; font-size: 2.5rem; opacity: 0.15; color: var(--primary); 
}
.question-box::before { content: '❝'; right: 10px; top: 20px; }
.question-box::after { content: '❞'; left: 10px; bottom: 5px; }

.question-actions { display: flex; justify-content: flex-end; gap: 12px; }
.ask-btn { background: var(--positive); color: var(--white); }
.ask-btn:hover { background: #226626; }
.skip-btn { background: var(--negative); color: var(--white); }
.skip-btn:hover { background: #b71c1c; }

/* Category Tags */
.category-tag-positive, .category-tag-negative, .category-positive, .category-negative {
  padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 500;
}
.category-tag-positive, .category-positive { background: var(--positive-bg); color: var(--positive); }
.category-tag-negative, .category-negative { background: var(--negative-bg); color: var(--negative); }

/* Main Content Grid */
.content-section { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
@media (max-width: 768px) { .content-section { grid-template-columns: 1fr; } }

.video-container, .analysis-container {
  background: var(--white); border-radius: var(--radius); padding: 25px; box-shadow: var(--shadow); 
  height: 100%; display: flex; flex-direction: column; transition: all var(--transition);
}
.video-container:hover, .analysis-container:hover { box-shadow: var(--shadow-md); }

.video-container h2, .analysis-container h2 {
  margin-bottom: 20px; color: var(--text); font-size: 1.6rem; font-weight: 600; 
  position: relative; padding-bottom: 12px;
}
.video-container h2::after, .analysis-container h2::after {
  content: ''; position: absolute; bottom: 0; right: 0; height: 3px; width: 70px; 
  background: var(--primary); border-radius: 3px;
}

/* Video Element */
.screen-video {
  width: 100%; border-radius: var(--radius); background: var(--bg-dark); height: 300px; 
  object-fit: contain; box-shadow: var(--shadow); transition: all var(--transition);
}
.screen-video:hover { transform: scale(1.01); }

/* Loading Animation */
.loading-spinner { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 200px; }
.spinner {
  border: 5px solid rgba(18,78,102,0.1); border-radius: 50%; border-top: 5px solid var(--primary);
  width: 60px; height: 60px; animation: spin 1.2s cubic-bezier(0.68,-0.55,0.27,1.55) infinite;
  margin-bottom: 15px; box-shadow: 0 0 15px rgba(18,78,102,0.3);
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Emotion Results */
.emotion-results { display: flex; flex-direction: column; gap: 20px; }
.emotion-summary {
  display: flex; flex-direction: column; gap: 10px; padding: 20px; background: var(--bg);
  border-radius: var(--radius); border-right: 4px solid var(--primary); box-shadow: var(--shadow);
  transition: all var(--transition);
}
.emotion-summary:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }

/* Emotion Bars */
.emotion-bars { margin-top: 15px; display: flex; flex-direction: column; gap: 14px; }
.emotion-bar-item { display: flex; align-items: center; gap: 12px; }
.emotion-name { width: 70px; font-weight: 500; }
.emotion-bar-container {
  flex-grow: 1; height: 22px; background: var(--bg); border-radius: 20px; overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}
.emotion-bar { height: 100%; transition: width 0.8s ease; }
.emotion-value { width: 50px; font-weight: 500; }

/* Emotion Colors */
.emotion-happy { background: linear-gradient(90deg, var(--primary), #1a6e8e); }
.emotion-angry { background: linear-gradient(90deg, var(--negative), #d32f2f); }
.emotion-sad { background: linear-gradient(90deg, var(--secondary), #3f5060); }
.emotion-fear { background: linear-gradient(90deg, #6a1b9a, #8e24aa); }
.emotion-disgust { background: linear-gradient(90deg, var(--positive), #388e3c); }
.emotion-surprise { background: linear-gradient(90deg, #ff8f00, #ffa726); }
.emotion-neutral { background: linear-gradient(90deg, #616161, #757575); }

/* History Section */
.history-section {
  background: var(--white); border-radius: var(--radius); padding: 30px; 
  box-shadow: var(--shadow); margin-bottom: 40px;
}
.history-section h2 {
  margin-bottom: 25px; color: var(--text); font-size: 1.7rem; position: relative; 
  padding-bottom: 12px; font-weight: 600;
}
.history-section h2::after {
  content: ''; position: absolute; bottom: 0; right: 0; height: 3px; width: 100px; 
  background: var(--primary); border-radius: 3px;
}

.history-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
.history-item {
  padding: 20px; background: var(--bg); border-radius: var(--radius); 
  border-right: 3px solid var(--primary); display: flex; flex-direction: column; gap: 10px;
  box-shadow: var(--shadow); transition: all var(--transition);
}
.history-item:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); }

.history-time { font-size: 0.9rem; color: var(--text-light); }
.history-emotion {
  font-weight: bold; padding: 4px 10px; border-radius: 15px; display: inline-block;
  margin-bottom: 5px; color: var(--white); font-size: 0.95rem;
}
.history-question { font-size: 0.95rem; line-height: 1.5; padding: 8px 0; }

/* Status Indicators */
.status-asked { color: var(--positive); font-weight: bold; padding: 2px 10px; background: var(--positive-bg); border-radius: 15px; }
.status-skipped { color: var(--negative); font-weight: bold; padding: 2px 10px; background: var(--negative-bg); border-radius: 15px; }
.status-pending { color: var(--text-light); font-style: italic; padding: 2px 10px; background: var(--bg-dark); border-radius: 15px; }

/* Modal Styles */
.modal-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6);
  display: flex; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px);
}

.modal-content {
  background: var(--white); padding: 30px; border-radius: 16px; box-shadow: var(--shadow-md);
  max-width: 520px; width: 90%; direction: rtl; animation: modal-appear 0.4s cubic-bezier(0.19,1,0.22,1);
}
@keyframes modal-appear { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

.modal-content h3 {
  margin-bottom: 25px; color: var(--primary); font-size: 1.5rem; text-align: center;
  border-bottom: 2px solid var(--primary); padding-bottom: 15px;
}

.modal-form { display: flex; flex-direction: column; gap: 18px; margin-bottom: 20px; }
.form-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; }
.form-group label { font-weight: 600; color: var(--text); font-size: 0.95rem; }
.form-group input, .form-group textarea {
  padding: 14px; border: 1px solid var(--bg-dark); border-radius: 6px; font-size: 1rem;
  font-family: inherit; transition: all var(--transition);
}
.form-group input:focus, .form-group textarea:focus {
  border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(18,78,102,0.1);
}

.modal-actions { display: flex; justify-content: space-between; gap: 15px; margin-top: 25px; }
.cancel-btn { background: var(--bg-dark); color: var(--text); }
.cancel-btn:hover { background: #c5c9c6; }
.confirm-btn { background: var(--primary); color: var(--white); }
.confirm-btn:hover { background: #0e3e52; }

/* Utility Classes */
.error-message {
  margin-top: 15px; padding: 12px 20px; background: var(--negative-bg); color: var(--negative);
  border-radius: 6px; text-align: center; font-weight: 500; border-right: 3px solid var(--negative);
}

.no-data {
  display: flex; justify-content: center; align-items: center; height: 200px; background: var(--bg);
  border-radius: var(--radius); color: var(--text-light); font-style: italic;
}

/* Export and Reset Buttons */
.export-btn { background: var(--primary) !important; font-weight: 400 !important; }
.export-btn:hover { background: #0e3e52 !important; }
.export-btn::before { content: '📊'; font-size: 1.2rem; margin-left: 8px; }

.reset-btn { background: var(--negative) !important; }
.reset-btn:hover { background: #b71c1c !important; }
.reset-btn::before { content: '🔄'; font-size: 1.2rem; margin-left: 8px; }

/* Responsive Design */
@media (max-width: 600px) {
  .history-list { grid-template-columns: 1fr; }
  .recording-controls { flex-direction: column; gap: 15px; }
  .start-button, .stop-button { width: 100%; }
  .app-header h1 { font-size: 1.6rem; }
  .modal-content { width: 95%; padding: 20px 15px; }
  .modal-actions { flex-direction: column; }
}